<!DOCTYPE html>
<html style="background-color: {{ page_background_color or '#ffffff' }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='./img/3D.ico') }}"/>
    <title>Crypto transfer with data wallet</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='bootstrap.min.css') }}">

    <style>
      :root {
        --page-bg: {{ page_background_color or '#ffffff' }};
        --page-fg: {{ page_text_color or '#111827' }};
        --card-bg: #ffffff;
        --card-border: #e5e7eb;
        --muted: .7;
      }
      body { color: var(--page-fg); background: var(--page-bg); }
      .page-wrap { max-width: 1100px; }
      .muted { opacity: var(--muted); }
  .flashes { margin: 1rem 0; color: green; font-weight: bold; }
      .card {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 6px 24px rgba(0,0,0,0.04);
      }

      .badge-soft {
        background: #f3f4f6;
        border: 1px solid #e5e7eb;
        color: #374151;
      }

      .code-area {
        width: 100%;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9rem;
        line-height: 1.4;
        background: #f9fafb;
        color: #111827;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 0.75rem 0.9rem;
        resize: vertical;
        white-space: pre-wrap;
        word-break: break-word;
      }

      .form-control, .custom-select { background: #ffffff; color: #111827; border: 1px solid #d1d5db; }
      .form-control:focus, .custom-select:focus { background: #ffffff; color: #111827; border-color: #9ca3af; box-shadow: none; }
      .custom-control-label { cursor: pointer; }
    </style>
  </head>
  <body>
    <div class="container page-wrap mt-4">
      <!-- Header -->
      <header class="text-center my-4">
        <h1 class="mt-3">OIDC4VP Request transaction data</h1>
        <p class="lead muted">Select a token, set the amount and recipient, and launch the verifier request</p>
      </header>

      {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="flashes">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

      <div class="row">
        <div class="col-lg-8 offset-2 mb-3">
          <div class="card p-3">
            <h5 class="mb-3">Transfer details</h5>
            <form method="post" action="/sandbox/verifier/crypto_transfer/build" id="transferForm">

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="small d-block mb-2">Network</label>
                  <div class="custom-control custom-switch">
                    <input type="checkbox" class="custom-control-input" id="useSepolia" name="use_sepolia" {% if use_sepolia %}checked{% endif %}>
                    <label class="custom-control-label" for="useSepolia">
                      Sepolia testnet <span class="muted">(off = Ethereum mainnet)</span>
                    </label>
                  </div>
                  <input type="hidden" name="chain_id" id="chainIdInput" value="{{ 11155111 if use_sepolia else 1 }}">
                </div>

                <div class="form-group col-md-6">
                  <label class="small">Token</label>
                  <select class="custom-select" id="tokenSymbol" name="token_symbol" required>
                    <option value="" selected>— Choose —</option>
                    <option value="USDC">USDC</option>
                    <option value="USDT">USDT (Mainet only)</option>
                    <option value="TALAO">TALAO (Mainet only)</option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="small">Amount (human, e.g., 5.25)</label>
                  <input type="text" class="form-control" name="human_amount" id="humanAmount" placeholder="0.0" required>
                </div>
                <div class="form-group col-md-6">
                  <label class="small">Recipient (EOA)</label>
                  <input type="text" class="form-control" name="recipient" id="recipient" placeholder="0x…" required>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="small">Order ID (optional)</label>
                  <input type="text" class="form-control" name="order_id" placeholder="#12345">
                </div>
                <div class="form-group col-md-6">
                  <label class="small">UI Title (optional)</label>
                  <input type="text" class="form-control" name="ui_title" placeholder="Crypto payment">
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="small">UI Subtitle (optional)</label>
                  <input type="text" class="form-control" name="ui_subtitle" placeholder="ERC-20 transfer demo">
                </div>
                <div class="form-group col-md-6">
                  <label class="small">UI Icon URI (optional)</label>
                  <input type="url" class="form-control" name="ui_icon_uri" placeholder="https://…">
                </div>
              </div>

              <div class="form-group">
                <label class="small">UI Purpose (optional)</label>
                <input type="text" class="form-control" name="ui_purpose" placeholder="Transfer 5 USDC to Merchant">
              </div>

              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-outline-dark">Generate Request</button>
              </div>
            </form>
          </div>
        </div>

       
      </div>

      <footer class="text-center my-5 muted">
        <small>&copy; Web3 Digital Wallet, 2025</small>
      </footer>
    </div>

    <script src="{{ url_for('static', filename='jquery-3.5.1.slim.min.js') }}"></script>
    <script src="{{ url_for('static', filename='bs-init.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap.min.js') }}"></script>
    <script>
      // Network toggle → chainId
      const useSepolia = document.getElementById('useSepolia');
      const chainIdInput = document.getElementById('chainIdInput');
      if (useSepolia) {
        const setChain = () => chainIdInput.value = useSepolia.checked ? '11155111' : '1';
        useSepolia.addEventListener('change', setChain);
        setChain();
      }
    </script>
  </body>
</html>
